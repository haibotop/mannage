/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.2.0
 * @license Commercially licensed to 永凯软件技术(上海)有限公司-913101157867305734(imclouds)
 **/
let _mouseP=function(t){return t||(t=window.event),t.pageX||t.pageY?{x:t.pageX,y:t.pageY}:{x:t.clientX+document.documentElement.scrollLeft-document.body.clientLeft,y:t.clientY+document.documentElement.scrollTop-document.body.clientTop}},_elCsys=function(t){let e=t.offsetTop,o=t.offsetLeft;for(t=t.offsetParent;t;)e+=t.offsetTop,o+=t.offsetLeft,t=t.offsetParent;return{top:e,left:o}};export default{mouseP:_mouseP,elCsys:_elCsys,getCoor(t,e){let o,l,h=_mouseP(t),f=_elCsys(e);return{X:o=h.x-f.left+e.parentNode.scrollLeft,Y:l=h.y-f.top+e.parentNode.scrollTop}},calcPolyPoints(t,e,o,l,h,f,i){i||(i=1);const p={left:t.left*i,top:t.top*i,width:t.width*i,height:t.height*i},n={left:e.left*i,top:e.top*i,width:e.width*i,height:e.height*i},d=h*i,r=l*i,g=f*i,s={x:p.left+p.width/2,y:p.top+p.height/2},w={x:n.left+n.width/2,y:n.top+n.height/2};let u,c,y=[],a=[],m=[],x=[];return u=[s.x,s.y],c=[w.x,w.y],"lr"===o?(a=[d,r],m=[d,g],x=[w.x,g],(y=[s.x,r])[1]>p.top&&y[1]<p.top+p.height?(y[0]=a[0]<s.x?p.left:p.left+p.width,u[0]=y[0],u[1]=y[1]):u[1]=y[1]<p.top?p.top:p.top+p.height,y[0]===u[0]&&y[1]===u[1]&&(a[0]>p.left&&a[0]<p.left+p.width?(a[1]=s.y>m[1]?p.top:p.top+p.height,u[0]=a[0],u[1]=a[1],y[0]=a[0],y[1]=a[1]):(u[0]=a[0]<p.left?p.left:p.left+p.width,y[0]=u[0])),x[1]>n.top&&x[1]<n.top+n.height?(x[0]=m[0]>w.x?n.left+n.width:n.left,c[0]=x[0],c[1]=x[1]):c[1]=x[1]<n.top?n.top:n.top+n.height,x[0]===c[0]&&x[1]===c[1]&&(m[0]>n.left&&m[0]<n.left+n.width?(m[1]=w.y>a[1]?n.top:n.top+n.height,c[0]=m[0],c[1]=m[1],x[0]=m[0],x[1]=m[1]):(c[0]=m[0]<n.left?n.left:n.left+n.width,x[0]=c[0]))):"tb"===o&&(a=[r,d],m=[g,d],x=[g,w.y],(y=[r,s.y])[0]>p.left&&y[0]<p.left+p.width?(y[1]=a[1]<s.y?p.top:p.top+p.height,u[0]=y[0],u[1]=y[1]):u[0]=y[0]<p.left?p.left:p.left+p.width,y[0]===u[0]&&y[1]===u[1]&&(a[1]>p.top&&a[1]<p.top+p.height?(a[0]=s.x>m[0]?p.left:p.left+p.width,u[0]=a[0],u[1]=a[1],y[0]=a[0],y[1]=a[1]):(u[1]=a[1]<p.top?p.top:p.top+p.height,y[1]=u[1])),x[0]>n.left&&x[0]<n.left+n.width?(x[1]=m[1]>w.y?n.top+n.height:n.top,c[0]=x[0],c[1]=x[1]):c[0]=x[0]<n.left?n.left:n.left+n.width,x[0]===c[0]&&x[1]===c[1]&&(m[1]>n.top&&m[1]<n.top+n.height?(m[0]=w.x>a[0]?n.left:n.left+n.width,c[0]=m[0],c[1]=m[1],x[0]=m[0],x[1]=m[1]):(c[1]=m[1]<n.top?n.top:n.top+n.height,x[1]=c[1]))),{start:u,m0:y,m1:a,m2:m,m3:x,end:c}},getMValue:function(t,e,o,l){return l||(l=1),"lr"===o?(t.left*l+t.width*l/2+e.left*l+e.width*l/2)/2:"tb"===o?(t.top*l+t.height*l/2+e.top*l+e.height*l/2)/2:void 0},calcStartEnd(t,e,o){let l,h,f,i;o||(o=1);let p=t.left*o,n=t.left*o+t.width*o,d=e.left*o,r=e.left*o+e.width*o;p>=r?(l=p,f=r):n<=d?(l=n,f=d):p<=d&&n>=d&&n<=r?f=l=(n+d)/2:p>=d&&n<=r?f=l=(p+n)/2:d>=p&&r<=n?f=l=(d+r)/2:p<=r&&n>=r&&(f=l=(p+r)/2);let g=t.top*o,s=t.top*o+t.height*o,w=e.top*o,u=e.top*o+e.height*o;return g>=u?(h=g,i=u):s<=w?(h=s,i=w):g<=w&&s>=w&&s<=u?i=h=(s+w)/2:g>=w&&s<=u?i=h=(g+s)/2:w>=g&&u<=s?i=h=(w+u)/2:g<=u&&s>=u&&(i=h=(g+u)/2),{start:[l,h],end:[f,i]}},drawRect(t,e,o,l){if(o[0]!==e[0]||o[1]!==e[1]){let h="",f=[o[0],o[1]];for(let o=0;o<f.length;++o){let l=(f[o]-e[o])/2;l>0?f[o]-=t>l?l:t:l<0&&(f[o]+=t>-l?-l:t)}h+=" L "+f[0]+" "+f[1]+" Q "+o[0]+" "+o[1],f=[o[0],o[1]];for(let e=0;e<f.length;++e){let o=(f[e]-l[e])/2;o>0?f[e]-=t>o?o:t:o<0&&(f[e]+=t>-o?-o:t)}return h+=" "+f[0]+" "+f[1]}},stopEventPop(t){t||(t=window.event),window.event?t.cancelBubble=!0:t.stopPropagation()},preventDefault(t){window.event?window.event.returnValue=!1:t.preventDefault()},isDrawingLine(t){let e="object"==typeof t?t.prop.$nowType:t;return"direct"===e||"dirDashed"===e||"segment"===e||"segDashed"===e},getRealStyle(t){let e=null;try{e=getComputedStyle(t,"style")}catch(o){e=getStyle(t,"style")}return e}};